<!DOCTYPE html>
<html lang="en">
<head> 
<!-- must replace $EXTRA, $TITLE, and $OGDESCRIPTION -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<title>$TITLE</title>
<link rel="stylesheet" href="/static/css/base20.css" />
$STYLE
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192 /">
<link rel="apple-touch-icon" href="/favicon-120x120.png" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script src=/static/all_pages7.js></script>

<meta property="og:site_name" content="Fiction Branches" />
<meta property="og:image" content="https://fictionbranches.net/favicon-192x192.png" />

<meta property="og:title" content="$TITLE" />
<meta name="description" content="$OGDESCRIPTION" />
<meta property="og:description" content="$OGDESCRIPTION" />

</head>
<body>
<div class="topcorner">
<a href="/"><img alt="Fiction Branches" src="/images/fblogo.png" class="fblogo" /></a>
<br/>
$ACCOUNT
</div>


<h1>Manage Tags</h1>

<hr />
<h3>Add a tag</h3>
<form method="post">
	<label for="shortname">Short name:</label><input type="text" name="shortname" id="shortname"></input><br/>
	<label for="longname">Long name:</label><input type="text" name="longname" id="longname"></input><br/>
	<label for="description">Description:</label><input type="text" name="description" id="description"></input><br/>
	<input type="submit" value="Add">
</form>
<hr/>
<h3>Existing tags</h3>
$EXTRA
<hr/>
<br/><br/><br/>
$DONATEBUTTON

<script>
	function deleteTag(shortName) {
		
		const container = document.getElementById('container_' + shortName);
		const deleteButton = document.getElementById('delete_btn_' + shortName);
		const tableRow = document.getElementById('row_' + shortName);
		const infoSpan = document.getElementById('span_' + shortName);
		
		infoSpan.innerHTML = "";
		
		const deleteOldStyle = deleteButton.style.display;
		deleteButton.style.display = "none";
		
		const confirmQuery = document.createElement('span');
		confirmQuery.innerHTML = "Are you sure?<br/>";
		
		const yesButton = document.createElement('button');
		yesButton.innerHTML = "Yes";
		
		const noButton = document.createElement('button');
		noButton.innerHTML = "No";
		
		const newDiv = document.createElement('div');
		newDiv.append(confirmQuery);
		newDiv.append(yesButton);
		newDiv.append(noButton);
		container.append(newDiv);
		
		noButton.onclick = function() {
			newDiv.remove();
			deleteButton.style.display = deleteOldStyle;
		};

		yesButton.onclick = function() {
			const req = new XMLHttpRequest();
			req.open("POST", "/fb/modtagdelete", true);
			req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			req.onload = function() {
				var resultString = req.responseText
				if (resultString === "done") {
					tableRow.parentNode.removeChild(tableRow);
				} else {
					infoSpan.innerHTML = " " + resultString;
					newDiv.remove();
					deleteButton.style.display = deleteOldStyle;
				}
			}
			req.send("shortname="+encodeURIComponent(shortName)); 
		};

		
	}
</script>

</body>
</html>
